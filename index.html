
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FlowMatrix AI</title>
    <meta name="description" content="FlowMatrix AI - Advanced AI Solutions" />
    <meta name="author" content="FlowMatrix AI" />
    
    <link rel="icon" href="/lovable-uploads/54fa5058-0927-424f-859e-4a5ec240c3f1.png" type="image/png">

    <meta property="og:title" content="FlowMatrix AI" />
    <meta property="og:description" content="FlowMatrix AI - Advanced AI Solutions" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="/lovable-uploads/be2df81d-7799-4867-a793-77b85560b836.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@flowmatrix_ai" />
    <meta name="twitter:image" content="/lovable-uploads/be2df81d-7799-4867-a793-77b85560b836.png" />
    
    <!-- Vapi Voice Assistant Widget -->
    <script>
      window.vapiWidgetConfig = {
        assistantId: "a10c3748-397d-4d16-b217-19faf4192046",
        publicKey: "100ff321-ef4d-444e-ac64-82980354d406",
        mode: "voice"
      };
    </script>
    <script
      src="https://vapi.daily.co/demo/vapi-widget.js"
      async
      type="text/javascript"
    ></script>
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- Vapi Voice Assistant Widget -->
    <vapi-widget 
      assistant-id="a10c3748-397d-4d16-b217-19faf4192046" 
      public-key="100ff321-ef4d-444e-ac64-82980354d406"
      mode="voice"
      auto-start="false"
      show-public-key-invalid-message="false"
      button-color="#3b82f6"
      position="bottom-left"
      style="z-index: 9999;"
    ></vapi-widget>
    
    <script>
      // Initialize Vapi voice functionality when DOM is loaded
      document.addEventListener('DOMContentLoaded', function() {
        console.log('DOM loaded, initializing Vapi widget...');
        
        const vapiWidget = document.querySelector('vapi-widget');
        if (vapiWidget) {
          console.log('Vapi widget found, configuring...');
          
          // Enable voice mode explicitly
          vapiWidget.setAttribute('mode', 'voice');
          vapiWidget.setAttribute('position', 'bottom-left');
          
          // Add event listeners for voice interactions
          vapiWidget.addEventListener('call-start', function() {
            console.log('Voice call started');
          });
          
          vapiWidget.addEventListener('call-end', function() {
            console.log('Voice call ended');
          });
          
          vapiWidget.addEventListener('error', function(event) {
            console.error('Vapi widget error:', event.detail);
          });
          
          // Try to make widget visible if it's not
          setTimeout(() => {
            const widgetElement = document.querySelector('vapi-widget');
            if (widgetElement) {
              widgetElement.style.display = 'block';
              widgetElement.style.visibility = 'visible';
              console.log('Vapi widget visibility ensured');
            }
          }, 1000);
        } else {
          console.error('Vapi widget not found in DOM');
        }
      });
      
      // Alternative initialization if the widget doesn't load
      window.addEventListener('load', function() {
        setTimeout(() => {
          if (!document.querySelector('vapi-widget') || !document.querySelector('vapi-widget').shadowRoot) {
            console.log('Attempting alternative Vapi initialization...');
            
            // Create fallback button if widget fails
            const fallbackButton = document.createElement('div');
            fallbackButton.innerHTML = 'ðŸŽ¤';
            fallbackButton.style.cssText = `
              position: fixed;
              bottom: 20px;
              left: 20px;
              width: 60px;
              height: 60px;
              background: #3b82f6;
              border-radius: 50%;
              display: flex;
              align-items: center;
              justify-content: center;
              color: white;
              font-size: 24px;
              cursor: pointer;
              z-index: 9999;
              box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            `;
            fallbackButton.onclick = function() {
              console.log('Fallback voice button clicked');
              // Here you would initialize Vapi programmatically
            };
            document.body.appendChild(fallbackButton);
          }
        }, 2000);
      });
    </script>
  </body>
</html>
